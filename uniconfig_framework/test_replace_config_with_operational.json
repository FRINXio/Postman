{
	"info": {
		"_postman_id": "c07db2dd-4096-4e0b-86c0-30b82da11ffe",
		"name": "test_replace_config_with_operational",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "put_config_in_device",
			"item": [
				{
					"name": "put_config_in_device",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "70042dae-e1e4-40c9-82ed-7181a12e65b2",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "6a9889b3-07f5-43de-af08-2d9d08a1757c",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4="
							},
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"frinx-uniconfig-topology:configuration\": {\n        \"Cisco-IOS-XR-ifmgr-cfg:interface-configurations\": {\n            \"interface-configuration\": [\n                {\n                    \"active\": \"act\",\n                    \"interface-name\": \"GigabitEthernet0/0/0/2\",\n                    \"shutdown\": [\n                        null\n                    ]\n                },\n                {\n                    \"active\": \"act\",\n                    \"interface-name\": \"GigabitEthernet0/0/0/1\",\n                    \"shutdown\": [\n                        null\n                    ]\n                },\n                {\n                    \"active\": \"act\",\n                    \"interface-name\": \"GigabitEthernet0/0/0/0\",\n                    \"shutdown\": [\n                        null\n                    ]\n                },\n                {\n                    \"active\": \"act\",\n                    \"interface-name\": \"MgmtEth0/0/CPU0/0\",\n                    \"Cisco-IOS-XR-ipv4-io-cfg:ipv4-network\": {\n                        \"addresses\": {\n                            \"primary\": {\n                                \"address\": \"192.168.1.213\",\n                                \"netmask\": \"255.255.255.0\"\n                            }\n                        }\n                    }\n                }\n            ]\n        },\n        \"Cisco-IOS-XR-aaa-locald-admin-cfg:aaa\": {\n            \"usernames\": {\n                \"username\": [\n                    {\n                        \"name\": \"cisco123\",\n                        \"usergroup-under-usernames\": {\n                            \"usergroup-under-username\": [\n                                {\n                                    \"name\": \"root-system\"\n                                }\n                            ]\n                        },\n                        \"secret\": \"$1$oB6Z$rjrIKLq5R0SxnVApzzDN10\"\n                    }\n                ]\n            }\n        },\n        \"Cisco-IOS-XR-man-xml-ttyagent-cfg:netconf\": {\n            \"agent\": {\n                \"tty\": {\n                    \"enable\": [\n                        null\n                    ]\n                }\n            }\n        },\n        \"Cisco-IOS-XR-ipv4-ospf-cfg:ospf\": {\n            \"processes\": {\n                \"process\": [\n                    {\n                        \"process-name\": \"65535\",\n                        \"start\": [\n                            null\n                        ],\n                        \"default-vrf\": {\n                            \"area-addresses\": {\n                                \"area-area-id\": [\n                                    {\n                                        \"area-id\": 0,\n                                        \"name-scopes\": {\n                                            \"name-scope\": [\n                                                {\n                                                    \"interface-name\": \"Bundle-Ether65535\",\n                                                    \"running\": [\n                                                        null\n                                                    ]\n                                                }\n                                            ]\n                                        },\n                                        \"running\": [\n                                            null\n                                        ]\n                                    }\n                                ]\n                            }\n                        }\n                    },\n                    {\n                        \"process-name\": \"100\",\n                        \"start\": [\n                            null\n                        ],\n                        \"default-vrf\": {\n                            \"area-addresses\": {\n                                \"area-area-id\": [\n                                    {\n                                        \"area-id\": 0,\n                                        \"name-scopes\": {\n                                            \"name-scope\": [\n                                                {\n                                                    \"interface-name\": \"GigabitEthernet0/0/0/2\",\n                                                    \"running\": [\n                                                        null\n                                                    ],\n                                                    \"cost\": 77\n                                                }\n                                            ]\n                                        },\n                                        \"running\": [\n                                            null\n                                        ]\n                                    }\n                                ]\n                            }\n                        }\n                    }\n                ]\n            }\n        },\n        \"Cisco-IOS-XR-ipv4-bgp-cfg:bgp\": {\n            \"instance\": [\n                {\n                    \"instance-name\": \"default\",\n                    \"instance-as\": [\n                        {\n                            \"as\": 0,\n                            \"four-byte-as\": [\n                                {\n                                    \"as\": 1,\n                                    \"bgp-running\": [\n                                        null\n                                    ],\n                                    \"default-vrf\": {\n                                        \"bgp-entity\": {\n                                            \"neighbor-groups\": {\n                                                \"neighbor-group\": [\n                                                    {\n                                                        \"neighbor-group-name\": \"nbrgroup1\",\n                                                        \"create\": [\n                                                            null\n                                                        ]\n                                                    }\n                                                ]\n                                            },\n                                            \"neighbors\": {\n                                                \"neighbor\": [\n                                                    {\n                                                        \"neighbor-address\": \"8.8.8.8\",\n                                                        \"remote-as\": {\n                                                            \"as-xx\": 0,\n                                                            \"as-yy\": 65000\n                                                        },\n                                                        \"neighbor-group-add-member\": \"nbrgroup1\"\n                                                    }\n                                                ]\n                                            }\n                                        }\n                                    }\n                                }\n                            ]\n                        }\n                    ]\n                },\n                {\n                    \"instance-name\": \"second-default\",\n                    \"instance-as\": [\n                        {\n                            \"as\": 0,\n                            \"four-byte-as\": [\n                                {\n                                    \"as\": 666,\n                                    \"bgp-running\": [\n                                        null\n                                    ],\n                                    \"default-vrf\": {\n                                        \"bgp-entity\": {\n                                            \"neighbor-groups\": {\n                                                \"neighbor-group\": [\n                                                    {\n                                                        \"neighbor-group-name\": \"nbrgroup1\",\n                                                        \"create\": [\n                                                            null\n                                                        ]\n                                                    }\n                                                ]\n                                            }\n                                        }\n                                    }\n                                }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        },\n        \"Cisco-IOS-XR-man-netconf-cfg:netconf-yang\": {\n            \"agent\": {\n                \"ssh\": {\n                    \"enable\": [\n                        null\n                    ]\n                }\n            }\n        },\n        \"Cisco-IOS-XR-crypto-sam-cfg:crypto\": {\n            \"Cisco-IOS-XR-crypto-ssh-cfg:ssh\": {\n                \"server\": {\n                    \"netconf-vrf-table\": {\n                        \"vrf\": [\n                            {\n                                \"vrf-name\": \"default\",\n                                \"enable\": [\n                                    null\n                                ]\n                            }\n                        ]\n                    },\n                    \"v2\": [\n                        null\n                    ]\n                }\n            }\n        },\n        \"Cisco-IOS-XR-shellutil-cfg:host-names\": {\n            \"host-name\": \"PE3\"\n        },\n        \"Cisco-IOS-XR-policy-repository-cfg:routing-policy\": {\n            \"route-policies\": {\n                \"route-policy\": [\n                    {\n                        \"route-policy-name\": \"policy2\",\n                        \"rpl-route-policy\": \"route-policy policy2\\nend-policy\"\n                    }\n                ]\n            }\n        }\n    }\n}"
						},
						"url": {
							"raw": "http://{{odl_ip}}:8181/restconf/config/network-topology:network-topology/topology/uniconfig/node/{{node_id}}/frinx-uniconfig-topology:configuration",
							"protocol": "http",
							"host": [
								"{{odl_ip}}"
							],
							"port": "8181",
							"path": [
								"restconf",
								"config",
								"network-topology:network-topology",
								"topology",
								"uniconfig",
								"node",
								"{{node_id}}",
								"frinx-uniconfig-topology:configuration"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "commit",
			"item": [
				{
					"name": "commit",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "349ddc7f-6e30-4627-ad1b-a14912b3d543",
								"exec": [
									"console.log(\"Response: \" + responseBody)",
									"//console.log(\"Request data:\" + JSON.stringify(request.data))",
									"",
									"pm.test(\"Status code 200\", function () {",
									"  pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Overall status: \" + pm.response.json()[\"output\"][\"overall-status\"], function () {",
									"    pm.expect(pm.response.json()[\"output\"][\"overall-status\"]).to.eql(\"complete\");",
									"});",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4=",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{{data}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{odl_ip}}:8181/restconf/operations/uniconfig-manager:commit",
							"protocol": "http",
							"host": [
								"{{odl_ip}}"
							],
							"port": "8181",
							"path": [
								"restconf",
								"operations",
								"uniconfig-manager:commit"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "replace_config_with_operational",
			"item": [
				{
					"name": "replace_config_with_operational",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "1a9010ba-df62-4e07-bf08-c5755258cb65",
								"exec": [
									"console.log(\"Response: \" + responseBody)",
									"",
									"pm.test(\"Status code is 200\", function () {",
									"  pm.response.to.have.status(200);",
									"});",
									"pm.test(\"Validate result\", function() {",
									"  pm.expect(pm.response.json()[\"output\"][\"overall-status\"]).to.eql(\"complete\");",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4="
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{{data}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{odl_ip}}:8181/restconf/operations/uniconfig-manager:replace-config-with-operational",
							"protocol": "http",
							"host": [
								"{{odl_ip}}"
							],
							"port": "8181",
							"path": [
								"restconf",
								"operations",
								"uniconfig-manager:replace-config-with-operational"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"protocolProfileBehavior": {}
}