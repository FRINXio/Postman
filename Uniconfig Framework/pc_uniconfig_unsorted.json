{
	"info": {
		"_postman_id": "9ca1e58a-c418-4042-bc2b-497b11b7cf8d",
		"name": "FRINX Uniconfig Unsorted",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Tests",
			"description": null,
			"item": [
				{
					"name": "FRHD-196",
					"description": "This is applicable for XRv5 only",
					"item": [
						{
							"name": "configure route policy regex",
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"console.log(\"Response: \" + responseBody)",
											"pm.test(\"Status code is 200\", function () {",
											"  pm.response.to.have.status(200);",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Basic YWRtaW46YWRtaW4="
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"input\" :\n  {\n     \"ios-cli:command\" : \"conf t\nas-path-set 2\n  ios-regex '^$'\nend-set\n!\nas-path-set 11\n  ios-regex '^(2914_)+$'\nend-set\n!\nas-path-set 12\n  ios-regex '_27699$',\n  ios-regex '_9506$'\nend-set\n!\nas-path-set 99\n  ios-regex '_16509$',\n  ios-regex '^(2914_)+(703_)+$'\nend-set\ncommit\nend\n\"\n  }\n}"
								},
								"url": {
									"raw": "http://{{odl_ip}}:8181/restconf/operations/network-topology:network-topology/topology/{{topology_id_cli}}/node/{{node_id}}/yang-ext:mount/cli-unit-generic:execute-and-read",
									"protocol": "http",
									"host": [
										"{{odl_ip}}"
									],
									"port": "8181",
									"path": [
										"restconf",
										"operations",
										"network-topology:network-topology",
										"topology",
										"{{topology_id_cli}}",
										"node",
										"{{node_id}}",
										"yang-ext:mount",
										"cli-unit-generic:execute-and-read"
									]
								}
							},
							"response": []
						},
						{
							"name": "Reconcile",
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test(\"Success\", function () {",
											"    pm.expect(pm.response.code).to.be.oneOf([200,201]);",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Basic YWRtaW46YWRtaW4="
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Accept",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "http://{{odl_ip}}:8181/restconf/operational/network-topology:network-topology/topology/uniconfig/node/{{node_id}}/frinx-uniconfig-topology:configuration/",
									"protocol": "http",
									"host": [
										"{{odl_ip}}"
									],
									"port": "8181",
									"path": [
										"restconf",
										"operational",
										"network-topology:network-topology",
										"topology",
										"uniconfig",
										"node",
										"{{node_id}}",
										"frinx-uniconfig-topology:configuration",
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "sync-from-network",
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"console.log(\"Response: \" + responseBody)",
											"",
											"pm.test(\"Status code is 200\", function () {",
											"  pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Validate configuration-status\", function() {",
											"  if ( \"node-sync-status-result\" in pm.response.json()[\"output\"] ){",
											"  pm.expect(pm.response.json()[\"output\"][\"node-sync-status-results\"][\"node-sync-status-result\"][0][\"nodeId\"]).to.eql(postman.getEnvironmentVariable(\"node_id\"));",
											"    pm.expect(pm.response.json()[\"output\"][\"node-sync-status-results\"][\"node-sync-status-result\"][0]).to.not.have.own.property(\"error-type\");",
											"  }",
											"});",
											""
										]
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "showPassword",
											"value": false,
											"type": "boolean"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"input\": {\n\t\t\t\t\"target-nodes\": {\n\t\t}\n\n\t}\n}"
								},
								"url": {
									"raw": "http://{{odl_ip}}:8181/restconf/operations/uniconfig-manager:sync-from-network",
									"protocol": "http",
									"host": [
										"{{odl_ip}}"
									],
									"port": "8181",
									"path": [
										"restconf",
										"operations",
										"uniconfig-manager:sync-from-network"
									]
								}
							},
							"response": []
						},
						{
							"name": "validate route policy",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "f9e1ec25-fde7-4473-bfb9-827d1433b4ed",
										"type": "text/javascript",
										"exec": [
											"console.log(\"Response: \" + responseBody)",
											"",
											"pm.test(\"Status code is 200\", function () {",
											"  pm.response.to.have.status(200);",
											"});",
											"//as-path-set-name",
											"pm.test(\"Validate as-path-set-name =12 \" + pm.environment.get(\"ELEMENT\"), function() {",
											"  pm.expect(pm.response.json()[\"frinx-openconfig-routing-policy:routing-policy\"][\"defined-sets\"][\"frinx-openconfig-bgp-policy:bgp-defined-sets\"][\"as-path-sets\"][\"as-path-set\"][0][\"as-path-set-name\"]).to.eql(\"12\");",
											"});",
											"//as-path-set-name",
											"pm.test(\"Validate as-path-set-name =2 \" + pm.environment.get(\"ELEMENT\"), function() {",
											"  pm.expect(pm.response.json()[\"frinx-openconfig-routing-policy:routing-policy\"][\"defined-sets\"][\"frinx-openconfig-bgp-policy:bgp-defined-sets\"][\"as-path-sets\"][\"as-path-set\"][1][\"as-path-set-name\"]).to.eql(\"2\");",
											"});",
											"//as-path-set-name",
											"pm.test(\"Validate as-path-set-name =11 \" + pm.environment.get(\"ELEMENT\"), function() {",
											"  pm.expect(pm.response.json()[\"frinx-openconfig-routing-policy:routing-policy\"][\"defined-sets\"][\"frinx-openconfig-bgp-policy:bgp-defined-sets\"][\"as-path-sets\"][\"as-path-set\"][2][\"as-path-set-name\"]).to.eql(\"11\");",
											"});",
											"//as-path-set-name",
											"pm.test(\"Validate as-path-set-name =99 \" + pm.environment.get(\"ELEMENT\"), function() {",
											"  pm.expect(pm.response.json()[\"frinx-openconfig-routing-policy:routing-policy\"][\"defined-sets\"][\"frinx-openconfig-bgp-policy:bgp-defined-sets\"][\"as-path-sets\"][\"as-path-set\"][3][\"as-path-set-name\"]).to.eql(\"99\");",
											"});",
											"pm.test(\"Validate  as12-1= \" + pm.environment.get(\"ELEMENT\"), function() {",
											"  pm.expect(pm.response.json()[\"frinx-openconfig-routing-policy:routing-policy\"][\"defined-sets\"][\"frinx-openconfig-bgp-policy:bgp-defined-sets\"][\"as-path-sets\"][\"as-path-set\"][0][\"config\"][\"as-path-set-member\"][0]).to.eql(\"ios-regex '_27699$'\");",
											"});",
											"pm.test(\"Validate as12-2 = \" + pm.environment.get(\"ELEMENT\"), function() {",
											"  pm.expect(pm.response.json()[\"frinx-openconfig-routing-policy:routing-policy\"][\"defined-sets\"][\"frinx-openconfig-bgp-policy:bgp-defined-sets\"][\"as-path-sets\"][\"as-path-set\"][0][\"config\"][\"as-path-set-member\"][1]).to.eql(\"ios-regex '_9506$'\");",
											"});",
											"pm.test(\"Validate  as2-1= \" + pm.environment.get(\"ELEMENT\"), function() {",
											"  pm.expect(pm.response.json()[\"frinx-openconfig-routing-policy:routing-policy\"][\"defined-sets\"][\"frinx-openconfig-bgp-policy:bgp-defined-sets\"][\"as-path-sets\"][\"as-path-set\"][0][\"config\"][\"as-path-set-member\"][0]).to.eql(\"ios-regex '_27699$'\");",
											"});",
											"pm.test(\"Validate  as11-1= \" + pm.environment.get(\"ELEMENT\"), function() {",
											"  pm.expect(pm.response.json()[\"frinx-openconfig-routing-policy:routing-policy\"][\"defined-sets\"][\"frinx-openconfig-bgp-policy:bgp-defined-sets\"][\"as-path-sets\"][\"as-path-set\"][2][\"config\"][\"as-path-set-member\"][0]).to.eql(\"ios-regex '^(2914_)+$'\");",
											"});",
											"pm.test(\"Validate  as99-1= \" + pm.environment.get(\"ELEMENT\"), function() {",
											"  pm.expect(pm.response.json()[\"frinx-openconfig-routing-policy:routing-policy\"][\"defined-sets\"][\"frinx-openconfig-bgp-policy:bgp-defined-sets\"][\"as-path-sets\"][\"as-path-set\"][3][\"config\"][\"as-path-set-member\"][0]).to.eql(\"ios-regex '_16509$'\");",
											"});",
											"pm.test(\"Validate as99-2 = \" + pm.environment.get(\"ELEMENT\"), function() {",
											"  pm.expect(pm.response.json()[\"frinx-openconfig-routing-policy:routing-policy\"][\"defined-sets\"][\"frinx-openconfig-bgp-policy:bgp-defined-sets\"][\"as-path-sets\"][\"as-path-set\"][3][\"config\"][\"as-path-set-member\"][1]).to.eql(\"ios-regex '^(2914_)+(703_)+$'\");",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Basic YWRtaW46YWRtaW4="
									},
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "    <vrf xmlns=\"urn:opendaylight:params:xml:ns:yang:ios-cli\">\n        <id>2</id>\n        <address-type>random</address-type>\n        <unicast>no</unicast>\n    </vrf>"
								},
								"url": {
									"raw": "http://{{odl_ip}}:8181/restconf/operational/network-topology:network-topology/topology/uniconfig/node/{{node_id}}/frinx-uniconfig-topology:configuration/frinx-openconfig-routing-policy:routing-policy",
									"protocol": "http",
									"host": [
										"{{odl_ip}}"
									],
									"port": "8181",
									"path": [
										"restconf",
										"operational",
										"network-topology:network-topology",
										"topology",
										"uniconfig",
										"node",
										"{{node_id}}",
										"frinx-uniconfig-topology:configuration",
										"frinx-openconfig-routing-policy:routing-policy"
									]
								}
							},
							"response": []
						},
						{
							"name": "deconfigure route policy regex",
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"console.log(\"Response: \" + responseBody)",
											"pm.test(\"Status code is 200\", function () {",
											"  pm.response.to.have.status(200);",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Basic YWRtaW46YWRtaW4="
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"input\" :\n  {\n     \"ios-cli:command\" : \"conf t\nno as-path-set 2\nno as-path-set 11\nno as-path-set 12\nno as-path-set 99\ncommit\nend\n\"\n  }\n}"
								},
								"url": {
									"raw": "http://{{odl_ip}}:8181/restconf/operations/network-topology:network-topology/topology/{{topology_id_cli}}/node/{{node_id}}/yang-ext:mount/cli-unit-generic:execute-and-read",
									"protocol": "http",
									"host": [
										"{{odl_ip}}"
									],
									"port": "8181",
									"path": [
										"restconf",
										"operations",
										"network-topology:network-topology",
										"topology",
										"{{topology_id_cli}}",
										"node",
										"{{node_id}}",
										"yang-ext:mount",
										"cli-unit-generic:execute-and-read"
									]
								}
							},
							"response": []
						},
						{
							"name": "ilegal ping command",
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"console.log(\"Response: \" + responseBody)",
											"pm.test(\"Status code is 200\", function () {",
											"  pm.response.to.have.status(200);",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Basic YWRtaW46YWRtaW4="
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"input\" :\n  {\n     \"ios-cli:command\" : \"conf t\nping 10.1.7.101 co\ncommit\nend\n\"\n  }\n}"
								},
								"url": {
									"raw": "http://{{odl_ip}}:8181/restconf/operations/network-topology:network-topology/topology/{{topology_id_cli}}/node/{{node_id}}/yang-ext:mount/cli-unit-generic:execute-and-read",
									"protocol": "http",
									"host": [
										"{{odl_ip}}"
									],
									"port": "8181",
									"path": [
										"restconf",
										"operations",
										"network-topology:network-topology",
										"topology",
										"{{topology_id_cli}}",
										"node",
										"{{node_id}}",
										"yang-ext:mount",
										"cli-unit-generic:execute-and-read"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "87c31b79-508d-46d9-b208-1ac0d5b2dabd",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "3f2639b3-32d0-4aa2-8d85-a83d14426dd3",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "FRHD-202",
					"description": "This is applicable for XRv5 only",
					"item": [
						{
							"name": "create empty interface with nonexisting node",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "b60eaab8-3af7-4b0b-b253-b10bd1c758fa",
										"type": "text/javascript",
										"exec": [
											"console.log(\"Response: \" + responseBody)",
											"",
											"pm.test(\"Status code\", function () {",
											"  pm.expect(pm.response.code).to.be.oneOf([200,201]);",
											"});",
											""
										]
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "Basic YWRtaW46YWRtaW4="
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"interface\": [\n        {\n            \"name\": \"{{eth_intf-id}}\",\n            \"config\": {\n                \"type\": \"iana-if-type:ethernetCsmacd\",\n                \"name\": \"{{eth_intf-id}}\",\n    \t        \"enabled\": {{eth_enabled_true}}\n            }\n        }\n    ]\n}"
								},
								"url": {
									"raw": "http://{{odl_ip}}:8181/restconf/config/network-topology:network-topology/topology/uniconfig/node/kristina/frinx-uniconfig-topology:configuration/frinx-openconfig-interfaces:interfaces/interface/{{eth_url_intf-id}}",
									"protocol": "http",
									"host": [
										"{{odl_ip}}"
									],
									"port": "8181",
									"path": [
										"restconf",
										"config",
										"network-topology:network-topology",
										"topology",
										"uniconfig",
										"node",
										"kristina",
										"frinx-uniconfig-topology:configuration",
										"frinx-openconfig-interfaces:interfaces",
										"interface",
										"{{eth_url_intf-id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "create dry-run commit on nonexisting node",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "535c2fcf-3df2-4821-a83c-2e163add3249",
										"type": "text/javascript",
										"exec": [
											"console.log(\"Response: \" + responseBody)",
											"",
											"if ( \"cisco_xr5\" === postman.getEnvironmentVariable(\"env_type\") ){",
											"    pm.test(\"Status code is 200\", function () {",
											"        pm.response.to.have.status(200);",
											"    });",
											"",
											"    pm.test(\"dryrun - overall-configuration-status complete\", function() {",
											"        pm.expect(pm.response.json()[\"output\"][\"overall-configuration-status\"]).to.eql(postman.getEnvironmentVariable(\"operations_result_complete\"));",
											"    });",
											"}",
											"",
											"pm.test(\"Validate configuration-status\", function() {",
											"  if ( \"node-sync-status-result\" in pm.response.json()[\"output\"] ){",
											"  pm.expect(pm.response.json()[\"output\"][\"node-sync-status-results\"][\"node-sync-status-result\"][0][\"nodeId\"]).to.eql(\"kristina\");",
											"  pm.expect(pm.response.json()[\"output\"][\"node-sync-status-results\"][\"node-sync-status-result\"][0][\"error-message\"]).to.eql(\"Node is missing in uniconfig topology OPERATIONAL datastore.\");",
											"  }",
											"});"
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Basic YWRtaW46YWRtaW4="
									},
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"input\": {\n    \"target-nodes\": {\n      \"node\": [\"kristina\"]\n    }\n  }\n}"
								},
								"url": {
									"raw": "http://{{odl_ip}}:8181/restconf/operations/dryrun-manager:dryrun-commit",
									"protocol": "http",
									"host": [
										"{{odl_ip}}"
									],
									"port": "8181",
									"path": [
										"restconf",
										"operations",
										"dryrun-manager:dryrun-commit"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "87c31b79-508d-46d9-b208-1ac0d5b2dabd",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "3f2639b3-32d0-4aa2-8d85-a83d14426dd3",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"_postman_isSubFolder": true
				}
			]
		}
	]
}